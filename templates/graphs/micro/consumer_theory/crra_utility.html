{% extends 'layouts/eg-layout.html' %}

{% block body %}
{% raw %}

    <div ng-controller="KineticGraphCtrl">
        <h1>Utility and Marginal Utility</h1>
        <hr/>
        <div class="row">
            <div class="col-md-8">
                <div id="utility"></div>
            </div>
            <div class="col-md-4">
                <div class="well">
                    <div class="row">
                        <div class="col-xs-4" style="text-align:right;font-size:12pt;padding-top:10px">Risk Aversion :
                        </div>
                        <div class="col-xs-8" id="rraSlider"></div>
                    </div>
                </div>
                <hr>
                <equation class="big" style="color: {{ color('growth') }}">\sigma = {{ (1/(params.rra)).toFixed(2) }}</equation>
                <hr/>
                <equation class="big">u(c) = \frac{c^{1 - 1/\color{
                    {{color('growth')}} }{\sigma}} - 1}{1 - 1/\color{
                    {{color('growth')}} }{\sigma}} || = {{ model.utilityFormula()}}
                </equation>
                <hr/>
                <equation class="big">u(c_A) = {{ model.utilityFormula(params.c)}} || = {{
                    model.utilityAtQuantity(params.c) | number: 2}}
                </equation>
            </div>
        </div>
    </div>
    <script>
        var scopeDefinition = {
            params: {
                rra: 0.5,
                c: 5
            },
            graphParams: ['rra'],
            restrictions: [
                {
                    expression: 'params.c',
                    restrictionType: 'range',
                    min: 1,
                    max: 10
                }
            ],
            model: {
                type: 'EconGraphs.ConstantRRA',
                definition: {
                    rra: 'params.rra'
                }

            },
            views: [
                {
                    type: 'KG.TwoVerticalGraphs',
                    definition: {
                        element_id: 'utility',
                        xAxisDef: {min: 0, max: 10, title: '\\text{Consumption (units)}'},
                        topGraph: {
                            yAxisDef: {min: 0, max: 'model.utilityAtQuantity(10)', title: '\\text{Total Utility (utils)}'},
                            objects: ['model.utilityFunctionView', 'model.marginalUtilityAtQuantitySlope(params.c, "A")']
                        },
                        bottomGraph: {
                            yAxisDef: {min: 0, max: 1, title: '\\text{Marginal Utility (utils/unit)}'},
                            objects: ['model.marginalUtilityFunctionView', 'model.marginalUtilityAtQuantityPoint(params.c, "A","params.c")']
                        },
                        objects: ['model.utilityAtQuantityPoint(params.c, "A","params.c")']
                    }
                },
                {
                    type: 'KG.Slider',
                    definition: {
                        element_id: 'rraSlider',
                        param: 'rra',
                        precision: '0.01',
                        axisDef: {min: 0, max: 2, ticks:0}
                    }
                }

            ]
        }
    </script>
{% endraw %}
{% endblock %}